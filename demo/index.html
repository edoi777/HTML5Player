<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dual Stream Example</title>

    <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>

    <!-- import the video-player -->
    <link rel="import" href="../video-player.html">

    <link rel="stylesheet" href="video_player.css">
  </head>
  <body>
    <h1>Dual Stream Example</h1>
    <video-player id="player" duration="1077" quality="hd" speed="0.7"  current-sub-lang="en" progress="1020" volume="33">
      <video-stream
        poster="https://i.vimeocdn.com/video/487220623_640.jpg"
        duration="1077"
        sd_src="https://player.vimeo.com/external/104624360.sd.mp4?s=a7a41026f4c356cc46de876e3e6072af&amp;download=1">
        <track kind="subtitles" src="sub_demo.vtt" srclang="la" label="Latin">
        <track kind="subtitles" src="sample-english-subtitles.vtt" srclang="en" label="English">
      </video-stream>
      <video-stream
        poster="https://i.vimeocdn.com/video/487308935_960.jpg"
        sd_src="https://player.vimeo.com/external/104693395.sd.mp4?s=06ac8490cbac4ce54ea154fbcc6e930c&amp;download=1"
        hd_src="https://player.vimeo.com/external/104693395.hd.mp4?s=58b93a8179c01c66fb3e33adf5b3e064&amp;download=1"
        ratio="4:3">
      </video-stream>

      <video-thumbnail img_src="thumbnails/125.jpg" starttime="5"></video-thumbnail>
      <video-thumbnail img_src="thumbnails/1850.jpg" starttime="74"></video-thumbnail>
      <video-thumbnail img_src="thumbnails/3425.jpg" starttime="137"></video-thumbnail>
      <video-thumbnail img_src="thumbnails/4300.jpg" starttime="172"></video-thumbnail>
      <video-thumbnail img_src="thumbnails/5100.jpg" starttime="204"></video-thumbnail>
      <video-thumbnail img_src="thumbnails/13275.jpg" starttime="531"></video-thumbnail>
      <video-thumbnail img_src="thumbnails/13625.jpg" starttime="545"></video-thumbnail>
      <video-thumbnail img_src="thumbnails/20075.jpg" starttime="803"></video-thumbnail>
      <video-thumbnail img_src="thumbnails/26925.jpg" starttime="1077"></video-thumbnail>
    </video-player>

    <h1>Single Stream Example</h1>
    <video-player id="player2" quality="hd">
      <video-stream
        poster="https://i.vimeocdn.com/video/487220623_640.jpg"
        duration="1077"
        sd_src="https://player.vimeo.com/external/104624360.sd.mp4?s=a7a41026f4c356cc46de876e3e6072af&amp;download=1">
      </video-stream>
    </video-player>

    <script>
      //var videoPlayerEvents = ["play","pause","fullscreen","subtitlesChanged","speedChanged","volumeChanged","qualityChanged","progressChanged","resize"];
      //with default settings
      var videoPlayerEvents = {play: '' , pause: '', fullscreen: '', subtitlesChanged: '', speedChanged: '', volumeChanged: '', qualityChanged: '', progressChanged: '', resize: ''};
      // to test tracking data
      function listenPersistor() {
        var bodyObj = document.querySelector("body");
        for (var key in videoPlayerEvents) {
          bodyObj.addEventListener(key, toPersist); 
        }
  //      initSetting();
      }
      function toPersist(event) {
        //track here
        console.log("Persist :: " + event.type +": Details => " + event.detail);
//debugger;
  //      bake_cookie(event.type, event.detail);
      }

    /*  function initSetting(){
debugger;
        //look for cookie else keep your own default settings as first cookie
        for (var key in videoPlayerEvents) {
          var cookie_var = read_cookie(key);
          if(cookie_var){
            videoPlayerEvents[key] = cookie_var;
          }
          //set the setting

        }
      }*/

      /**
       *  Cookie Functions  
       */
/*
      function bake_cookie(name, value) {
debugger;
        var cookie = [name, '=', JSON.stringify(value), '; domain=.', window.location.host.toString(), '; path=/;'].join('');
        document.cookie = cookie;
      }

      function read_cookie(name) {
        var result = document.cookie.match(new RegExp(name + '=([^;]+)'));
        result && (result = JSON.parse(result[1]));
        return result;
      }
 
      function delete_cookie(name) {
        document.cookie = [name, '=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.', window.location.host.toString()].join('');
      }
*/
      window.onload = listenPersistor;
    </script>

  </body>
</html>
