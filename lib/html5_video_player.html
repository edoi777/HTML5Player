<!-- IMPORTS START -->
<!-- polymer -->
<link rel="import" href="../../packages/polymer/polymer.html">
<!-- core elements -->
<link rel="import" href="../../packages/core_elements/core_splitter.html">
<link rel="import" href="../../packages/core_elements/av_icons.html">
<!-- paper-elements -->
<link rel="import" href="../../packages/paper_elements/paper_fab.html">
<link rel="import" href="../../packages/paper_elements/paper_slider.html">
<!-- IMPORTS END -->

<script type="application/dart" src="html5_video_player.dart"></script>

<polymer-element name="html5-video-player" attributes="streams">
  <template>
  
    <style>
      :host {
        max-width: 100%;
        height: auto;
        position: relative;
      }
      paper-fab {
        position: absolute;
        bottom: 1em;
        right: 1em;
      }
      #videoContainer{
        position: relative;
        margin: 0 1em 0 1em;
      }
      paper-slider {
        width: 100%;
        position: absolute;
        bottom: -1em;
      }
      paper-slider::shadow #sliderKnobInner,
      paper-slider::shadow #sliderKnobInner::before,
      paper-slider::shadow #sliderBar::shadow #activeProgress {
        background-color: #0f9d58;
      }
      core-splitter {
        margin: 0 0.3em 0 0.3em;
      }
      video {
        height: 100%;
        width: 100%;
      }
      #menu {
        display: block;
        -webkit-transition: opacity 500ms ease-out;
        -moz-transition: opacity 500ms ease-out;
        -ms-transition: opacity 500ms ease-out;
        -o-transition: opacity 500ms ease-out;
        transition: opacity 500ms ease-out;
        opacity: 0; 
        overflow: hidden;
      }
      #menu.shown {
        opacity: 1;
      }
    </style>
    
    <div id="container" vertical layout on-mouseover="{{showMenu}}" on-mouseout="{{hideMenu}}">
      <div id="videoContainer" horizontal layout>
      
        <video id="leftVideo" _poster="{{leftStream['poster']}}">
          <template repeat="{{ streamType in leftStream['video'].keys }}">
            <source _src="{{leftStream['video'][streamType].values.first}}" type="{{streamType}}">
          </template>
        </video>

        <core-splitter id="splitter" direction="left" minSize="200px"></core-splitter>
        
        <video id="rightVideo" _poster="{{rightStream['poster']}}">
          <template repeat="{{ streamType in rightStream['video'].keys }}">
            <source _src="{{rightStream['video'][streamType].values.first}}" type="{{streamType}}">
          </template>
        </video>
        
        <paper-fab id="menu" icon="{{menuIcon}}" on-click={{togglePlay}}></paper-fab>
      </div>
      <!--<paper-slider id="progress" pin value="{{currentTime}}" max="{{duration}}" secondaryProgress="{{buffered}}" on-mouseover="{{showKnob}}" on-mouseout="{{hideKnob}}" on-mousedown="{{pause}}"></paper-slider>-->
      <paper-slider id="progress" pin value="{{currentTime}}" max="{{duration}}" on-mouseover="{{showKnob}}" on-mouseout="{{hideKnob}}" on-mousedown="{{startSeeking}}" on-mouseup="{{stopSeeking}}"></paper-slider>
    </div>
  </template>
</polymer-element>